[{"uri":"https://jonghyun-yun.github.io/procmod/piacc/","title":"PIACC","tags":[],"description":"","content":"Chapter 1 PIACC Programme for the International Assessment of Adult Competencies (PIAAC)\n"},{"uri":"https://jonghyun-yun.github.io/procmod/model/","title":"Model","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/","title":"Process data modeling","tags":[],"description":"","content":"WIP: Process data modeling To be shared during meetings.\n"},{"uri":"https://jonghyun-yun.github.io/procmod/model/v2/","title":"Model V2","tags":[],"description":"","content":"- [pattern discovery](#pattern-discovery)   likelihood prior pseudo code  update \\(\\kappa_{m}\\) update \\(\\tau_{k}\\) update \\(\\theta_{k}\\) update \\(\\sigma\\)   data structure  msm R package    Let \\(S\\) denotes a set of all possible action. For each state \\(m \\in S\\), \\(A_{m}\\) denotes a set of competing transitions \\(\\{l_1, \\ldots, l_{n_m}\\}\\) that can be taken directly after \\(m\\). Let \\(Y_k(t)\\) denote an action of k-th respondent at time \\(t\\). All respondents assmed to begin problem solving processes at time \\(t=0\\).\nThe intensity function \\(q_{ml}(\\cdot)\\) represents the instantaneous risk of moving from action \\(m\\) to \\(l\\):\n\\begin{align*} q_{ml}\\left(t ; \\mathcal{F}_{t}\\right)= \u0026amp; \\lim _{\\delta t \\rightarrow 0} \\frac{P\\left(Y(t+\\delta t)=l \\mid Y(t)=m, \\mathcal{F}_{t}\\right)}{\\delta t}, m \\neq l, m, l \\in S, \\end{align*}\nwhere \\(\\mathcal{F}_t\\) denotes the process up to time \\(t\\).\nAction transition is assumed to follow Semi-Markovian, which means the intensity depends on the sojourn time (\\(t - t_{m}\\) ; time spent on the current action). This is often called \u0026ldquo;clock reset\u0026rdquo; approach as opposed to \u0026ldquo;clock forward\u0026rdquo; approach. Let \\(dt_{m}\\) denote the sojourn time.\nCox model\n\\begin{align} q_{ml}\\left(t ; \\mathcal{F}_{t}\\right) = \u0026amp; q_{ml} (t - t_{m}; \\boldsymbol{\\lambda}, \\boldsymbol{\\beta}, \\mathbf{z}(t))\\\\\\\n= \u0026amp; \\lambda_{ml}(dt_{m}) e^{(\\boldsymbol{\\beta}\u0026rsquo; \\mathbf{z}(t) + \\theta_{k}) D_{ml}}, \\end{align}\nfor person \\(k = 1,\\ldots,N\\), where \\(\\mathbf{z}(t)\\) is time-varying covariates, \\(\\lambda_{kml}(t)\\) is a baseline intensity function, \\(D_{ml} \\in [-1,1]\\) denotes the cosine similarity between actions \\(m\\) and \\(l\\). The cosine similarity is obtained using word2vec on action sequences of an item. The closer the cosine value to 1, the greater the similarity between actions. The closer the cosine value to -1, the greater the dis-similarity between actions. This mean there are \\(n_{m}\\) corresponding intensity functions for state \\(m\\), and overall \\(\\sum_{m in S} n_m\\) intensity functions.\nWe use the constant baseline hazard based on out-of-state transition speed and person\u0026rsquo;s transition speed: \\[ \\lambda_{ml}(dt) = \\kappa_{m} \\tau_{k} \\text{ for } l \\in A_{m}. \\]\nA running model has no coviarate terms: \\[ q_{ml}\\left(t ; \\mathcal{F}_{t}\\right) = q_{ml}(dt) = \\kappa_{m} \\tau_{k} e^{\\theta_{k} D_{ml} }. \\]\n larger \\(\\kappa_{m}\\) shorter time staying on action \\(m\\) (faster out-of-state transition) larger \\(\\tau_{k}\\), faster transition speed larger \\(\\theta_{k}\\), larger trasition rate towards a similar action. A person with large \\(\\theta_{k}\\) tends to choose more coherent actions  pattern discovery  divide tau by 1) number of actions use 2) total time for visualization   divided by 2)   find persons (small # of actions, large # of actions: right vs wrong)  시간이 많이 걸리고 맞은사람 vs 적게 걸리고 맞은 사람. 적은 액션으로 맞은 사람 vs 많은 액션으로 틀린 사람.   무조건 빨리 푼다고 잘하는게 아니고, 느리거나 혹은 상이한 액션 개수로 정답에 이르는 프로세스 발견에 초점.  likelihood \\begin{align*} q_{ml} (t ; \\boldsymbol{\\lambda}, \\boldsymbol{\\beta}, \\mathbf{z}(t)) = \u0026amp; \\lambda_{ml}(t) e^{(\\boldsymbol{\\beta}\u0026rsquo; \\mathbf{z}(t) + \\theta_{k}) D_{ml}}\\\\\\\nq_{ml}\\left(t ; \\mathcal{F}_{t}\\right)= \u0026amp; \\lim _{\\delta t \\rightarrow 0} \\frac{P\\left(Y(t+\\delta t)=l \\mid Y(t)=m, \\mathcal{F}_{t}\\right)}{\\delta t}, m \\neq l, m, l \\in S \\end{align*}\nThe survival function is \\[ S_{ml}(dt) = e^{-\\int_{0}^{dt_{m}} q_{ml}(x) \\dd x}. \\] Let \\(\\nu_{mlk}(t) = 1\\) if person \\(k\\) jump from actions \\(m\\) to \\(l\\) at time \\(t\\); 0 otherwise. \\[ f_{ml}(t) = q_{ml}(t) S_{ml}(t) \\] \\[ likelihood =\\prod_{k} f_{ml}(dt) \\prod_{g \\in A_{m}} S_{mg}(t), \\] \\[ f_{ml} = q_{ml}(t) S_{ml}(t), S_{ml}(t) = e^{-\\int_{0}^{t^{stop} - t^{start}} q_{ml}(t)\\dd t} \\]\n\\[ S_{ml}(dt) = e^{-dt \\kappa_{m} \\omega_{l} \\tau_{k} e^{(\\theta_{k} + \\beta) D_{ml} }} \\]\n\\(n = 1,\\ldots,M_{k}\\): n-th action of k-th person, \\(M_k\\): sequence length\n\\( \\delta_{k,n,m} = 1 \\) if person k\u0026rsquo;s n-th action is m.\n\\( \\delta_{k,n,m} \\delta_{k,n+1,l} = 1 \\) for \\(n \u0026lt; M_{k}\\) if person k\u0026rsquo;s n-th transition is m to l.\ntime at starting state (one after START) is set to the first action (n=1), and the corresponding time is set to 0.\nprior The proposed method use a fully Bayesian approach for estimating the proposed latent space model, using MCMC methods. Our prior specification is as follows:\n\\begin{align*} \\pi\\left(\\kappa_{m}\\right) \u0026amp; \\sim \\operatorname{Gamma}\\left(a_{\\kappa}, b_{\\kappa})\\right); \\\\\\\n\\pi\\left(\\tau_{k}\\right) \u0026amp; \\sim \\operatorname{Gamma}\\left(a_{\\kappa}, b_{\\kappa})\\right); \\\\\\\n\\pi\\left(\\theta_{k} | \\sigma^{2}\\right) \u0026amp; \\sim \\mathrm{N}\\left(0, \\sigma^{2}\\right); \\\\\\\n\\pi\\left(\\sigma^{2}\\right) \u0026amp; \\sim \\operatorname{lnv}-\\operatorname{Gamma}\\left(a_{\\sigma}, b_{\\sigma}\\right); \\\\\\\n\\end{align*}\ninv-Gamma(θ|α,β) \\[ p(\\theta)=\\frac{\\beta^{\\alpha}}{\\Gamma(\\alpha)} \\theta^{-(\\alpha+1)} e^{-\\beta / \\theta}, \\quad \\theta\u0026gt;0 \\]\nwhere hyperparameters are chosen as \\[a_{\\sigma}=0.0001, b_{\\sigma}=0.0001, \\mu_{\\theta}=0, \\text { and } \u0026hellip;.\\]\nBased on our experience, the inference of \\(\\mathbf{\\Theta}\\) is highly sensitive to its variance \\(\\sigma^2\\). Also, the configuration of latent embeddings highly depends on the scale parameter \\(\\gamma\\) of the latent space. Rather than choosing sub-optimal tuning parameters, we use a layer of hyper-priors to learn optimal values of these parameters from data. We choose hyperparameters such that priors are minimally informative to facilitate the flexible Bayesian learning.\npseudo code  3.2 Normal data with a noninformative prior distribution org-id:{ce3939d9-fb55-4b01-8747-0f486c98c9e7}:org-id Continuous distributions org-id:{5c29e214-f86d-41d5-89a0-e164602bf6b8}:org-id  update \\(\\kappa_{m}\\)  all \\(k\\) person\u0026rsquo;s having action m, all l ∈ A_m (all possible actions that can jump from m) transition start and stop time \\(dt_{k,n}\\) for all \\(\\delta_{k,n,m} = 1\\) For each \\(k,c\\), a symmetric MH jumping \\(J(\\kappa_{m}^{(l-1)} \\rightarrow \\kappa_{m}^{* })\\) is used to propose a new sample. We accept \\(\\kappa_{m}^{(l)} = \\kappa_{m}^{* }\\) with probability \\(\\min(1, r_{{\\kappa_{m}}^{* }})\\) where  \\begin{align*} \\log r_{{\\kappa_{m}}^{* }} =\u0026amp; \\sum \\delta_{k,n,m} (\\log \\kappa_{m}^{* } - \\log \\kappa_{m}^{(l-1)})\\\\\\\n\u0026amp;-\\sum dt (\\kappa_{m}^{* } - \\kappa_{m}^{(l-1)}) \\tau_{k} e^{(\\theta_{k} + \\beta) D_{ml} }\n \\log \\frac{\\pi(\\kappa_{m}^{* })}{\\pi(\\kappa_{m}^{t})}. \\end{align*}  update \\(\\tau_{k}\\)  all \\(k\\) person\u0026rsquo;s m and l ∈ A_m all kth person\u0026rsquo;s transition start and stop time  \\begin{align*} \\log r_{{\\tau_{k}}^*} =\u0026amp; \\sum \\delta_{k,n,m} (\\log \\tau_{k}^* - \\log \\tau_{k}^{(l-1)})\\\\\\\n\u0026amp;-\\sum dt \\kappa_{m}e^{(\\theta_{k} + \\beta) D_{ml}} ( \\tau_{k}^* - \\tau_{k}^{(l-1)} )\n \\log \\frac{\\pi(\\tau_{k}^*)}{\\pi(\\theta_{k}^{t})}. \\end{align*}  update \\(\\theta_{k}\\)  all \\(k\\) person\u0026rsquo;s m and l ∈ A_m all kth person\u0026rsquo;s transition start and stop time For each \\(k\\), a symmetric MH jumping \\(J(\\theta_{k}^{(l-1)} \\rightarrow \\theta_{k}^{* }\\) is used to propose a new sample. We accept \\(\\theta_{k}^{(l)} = \\theta_{k}^{* }\\) with probability \\(\\min(1, r_{{\\theta_{k}}^{* )}})\\) where  \\begin{align*} \\log r_{{\\theta_{k}}^{* }} =\u0026amp; \\sum \\delta_{k,n,m} (\\theta_{k}^{* } - \\theta_{k}^{(l-1)})D_{ml}\\\\\\\n\u0026amp;-\\sum dt \\kappa_{m} \\tau_{k} e^{ \\beta D_{ml} }(e^{\\theta_{k}^{* }D_{ml}} - e^{\\theta_{k}^{(l-1)} D_{ml} })\n \\log \\frac{\\pi(\\theta_{k}^{* })}{\\pi(\\theta_{k}^{(l-1)})}.\\\\\\\n\\end{align*}  update \\(\\sigma\\) \\[ p( \\sigma^2|e.e.) \\propto invGamma(\\sigma^{2}|a,b) \\prod N(\\theta_{k} | \\mu, \\sigma^2) \\] \\(\\sigma^{2} \\sim inv-gamma(a + 0.5 * N, b + 0.5 + \\sum \\theta_{k}^2)\\) with flat prior: \\(\\sigma^{2} \\sim inv-gamma(0.5 * N, 0.5 + \\sum \\theta_{k}^2)\\)\ndata structure msm R package https://www.rdocumentation.org/packages/msm/versions/1.6.8/topics/msm2Surv\nlibrary(msm) msmdat \u0026lt;- data.frame( subj = c(1, 1, 1, 1, 1, 2, 2, 2), days = c(0, 27, 75, 97, 1106, 0, 90, 1037), status = c(1, 2, 3, 4, 4, 1, 2, 2), age = c(66, 66, 66, 66, 69, 49, 49, 51), treat = c(1, 1, 1, 1, 1, 0, 0, 0) ) # transitions only allowed to next state up or state 4 Q \u0026lt;- rbind(c(1, 1, 0, 1), c(0, 1, 1, 1), c(0, 0, 1, 1), c(0, 0, 0, 0)) dat \u0026lt;- msm2Surv(data=msmdat, subject=\u0026#34;subj\u0026#34;, time=\u0026#34;days\u0026#34;, state=\u0026#34;status\u0026#34;, Q=Q) dat attr(dat, \u0026#34;trans\u0026#34;) "},{"uri":"https://jonghyun-yun.github.io/procmod/model/v1/","title":"Model V1","tags":[],"description":"","content":" option1: similar items share the same action space option2: each item has its own action space (item-specific action space)  See jackson_flexsurv_2016for available baseline functions. Proportional baseline: \\[ \\lambda_{ml}(dt_{k,n}) = \\lambda_{m0}(t) \\lambda_{l} \\tau_{k} \\text{ for } l \\in S_{m} \\text{and} \\lambda_{s_{m,1}}=1. \\] \\(dt_{k,n}\\) denotes tk,nstop- tk,nstartProportional hazard term: \\[ e^{(\\theta_{k} + \\beta) D_{ml} } \\]\n add covariate later.  out-of-state, item, person parameters.\n no incercept term in prop. hazard if baseline contains constant in the same level. action m leads to more/less coherent action \\(D_{ml}\\) is bi-directional similarity mapping. including \\(\\beta_m\\) doesn\u0026rsquo;t make it directional. is \\(\\beta_k\\) meaningful for item-specific action space? certainly not! this opens up the question about how actions should be defined. loosely defined without event_desciption or not.  option1: similar items share the same action space no event description should be used.\noption2: each item has its own action space (item-specific action space)  use multi-state modeling framework to explain? target journal: grant application (check deadline) meeting at 4pm (CST) online learning platform: interaction with online resources, with instructors, with other people (communication length, contents) - team collaboration.  data will be available on Aug. team science program (NIH)    The intensity function \\(q_{ml}(\\cdot)\\) represents the instantaneous risk of moving from action \\(m\\) to \\(l\\).\n\\begin{align*} q_{ml} (t ; \\boldsymbol{\\lambda}, \\boldsymbol{\\beta}, \\mathbf{z}(t)) = \u0026amp; \\lambda_{ml}(t) e^{\\beta_j + (\\beta_m + \\theta_{\\beta}) D_{ml}}, \\end{align*}\nwhere \\(\\boldsymbol{\\alpha}\\) is a vector of intercepts, and \\(\\boldsymbol{\\beta}\\) is coefficients associated with \\(\\mathbf{z}(t)\\), \\(\\lambda_{k,m\\rightarrow l}(t)\\) is a baseline intensity function. For each state \\(l\\), there are competing transitions \\(m_1, \\ldots, m_{n_l}\\). This mean there are \\(n_{l}\\) corresponding survival models for state \\(l\\), and overall \\(K=\\sum_l n_l\\) models. Models with no shared parameters can be estimated Common out of state transition: \\(\\beta_{ml}=\\beta_{m}\\).\nBaseline hazard: \\[ \\lambda_{ml}(t) = \\alpha_{m1}(t) \\alpha_{l} + \\theta_{\\lambda} \\text{ for } l \\neq 1. \\] Proportional hazard term: \\[ e^{\\beta_j + (\\beta_m + \\theta_{\\beta}) D_{ml}} \\]\n \\(D_{ml}\\) is bi-directional similarity embedding between actions \\(m\\) and \\(l\\).  The piecewise-constant baseline hazard is used:\n\\begin{equation} \\label{eq:1} \\lambda(t) = \\lambda_j \\text{ if } s_{j-1} \\le t \u0026lt; s_{j}, \\end{equation}\nfor \\(j = 1,\\ldots,J\\). \\(\\lambda_{j}\\) could be a function of the similarity. This would be similar to have a piecewise constant transition matrix (time-inhomogeneous Markov chain), but much simpler as you have a parametric model for constants. The cosine similiarity should be normalized before used.\n\\begin{align*} q_{ml} (t ; \\boldsymbol{\\alpha}, \\boldsymbol{\\beta}, \\mathbf{z}(t)) = \u0026amp; \\lambda_{ml}(t) \\exp( \\boldsymbol{\\beta}_{m,l}\u0026rsquo; \\mathbf{z}_{i,m,l}(t) ), \\end{align*}\n\\begin{align*} q_{ml} (t ; \\boldsymbol{\\alpha}, \\boldsymbol{\\beta}, \\mathbf{z}(t)) = \u0026amp; \\lambda_{k,m \\rightarrow l}(t) \\exp( \\alpha_m + \\alpha_l + \\boldsymbol{\\beta} d_{i,m,l} ), \\end{align*}\nwhere \\(\\boldsymbol{\\alpha}\\) is a vector of intercepts, and \\(\\boldsymbol{\\beta}\\) is coefficients associated with \\(\\mathbf{z}(t)\\), \\(\\lambda_{k,m\\rightarrow l}(t)\\) is a baseline intensity function. For each state \\(l\\), there are competing transitions \\(m_1, \\ldots, m_{n_l}\\). This mean there are \\(n_{l}\\) corresponding survival models for state \\(l\\), and overall \\(K=\\sum_l n_l\\) models. Models with no shared parameters can be estimated separately.\n"},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/sprained_ankle-1/","title":"sprained_ankle-1","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/tickets/","title":"tickets","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/club_membership-1/","title":"club_membership-1","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/book_order/","title":"book_order","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/meeting_room/","title":"meeting_room","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/locate_email/","title":"locate_email","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/party_invitations-2/","title":"party_invitations-2","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/party_invitations-1/","title":"party_invitations-1","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_results/","title":"item results","tags":[],"description":"","content":" party_invitations-1 party_invitations-2 cd_tally sprained_ankle-1 sprained_ankle-2 tickets class_attendance club_membership-1 club_membership-2 book_order meeting_room reply_all locate_email lamp_return   Total or first action time has weak association with θ. # of actions and first action time have weak or no assciation. # of actions has some association with the response. τ and first action time has negative correaltion. τ and # of actions have weak or no association # of actions and θ time have positive correlation.  party_invitations-1 out_dir=\u0026#34;party_invitations-1/\u0026#34; cd $out_dir cd figure # convert -density 300 theta_tau_res.pdf theta_tau_res-%d.png convert -density 300 time_action_more.pdf time_action_more-%d.png convert -density 300 time_action.pdf time_action-%d.png \u0026lt;party_invitations-1/figure/theta_tau_res.pdf\u0026gt; party_invitations-2 out_dir=\u0026#34;party_invitations-2/\u0026#34; cd $out_dir cd figure # convert -density 300 theta_tau_res.pdf theta_tau_res-%d.png convert -density 300 time_action_more.pdf time_action_more-%d.png convert -density 300 time_action.pdf time_action-%d.png \u0026lt;party_invitations-2/figure/theta_tau_res.pdf\u0026gt; cd_tally out_dir=\u0026#34;cd_tally/\u0026#34; sprained_ankle-1 out_dir=\u0026#34;sprained_ankle-1/\u0026#34; sprained_ankle-2 out_dir=\u0026#34;sprained_ankle-2/\u0026#34; tickets out_dir=\u0026#34;tickets/\u0026#34; class_attendance out_dir=\u0026#34;class_attendance/\u0026#34; club_membership-1 out_dir=\u0026#34;club_membership-1/\u0026#34; club_membership-2 out_dir=\u0026#34;club_membership-2/\u0026#34; book_order out_dir=\u0026#34;book_order/\u0026#34; meeting_room out_dir=\u0026#34;meeting_room/\u0026#34; reply_all out_dir=\u0026#34;reply_all/\u0026#34; locate_email out_dir=\u0026#34;locate_email/\u0026#34; lamp_return out_dir=\u0026#34;lamp_return/\u0026#34; "},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_home/","title":"item home","tags":[],"description":"","content":" party_invitation-1 party_invitation-2 cd_tally sprained_ankle-1 sprained_ankle-2 tickets class_attendance club_membership-1 club_membership-2 book_order meeting_room reply_all locate_email lamp_return  See the codebook for details\u0026hellip;\u0026hellip;. PS_BOOKLET_ITEM.csv\nparty_invitation-1   party_invitation-2   cd_tally   sprained_ankle-1   sprained_ankle-2   tickets   class_attendance   club_membership-1   club_membership-2   book_order   meeting_room   reply_all   locate_email   lamp_return   "},{"uri":"https://jonghyun-yun.github.io/procmod/piacc/item_codebook/","title":"item codebook","tags":[],"description":"","content":"   ITEM NAME CODEBOOK RESPONSE     PS1_1 Party Invitations - 1 U01a000S POLYTOMOUS (0 to 3), No response (R ), Not reached / not attempted (N)   PS1_2 Party Invitations - 2 U01b000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS1_3 CD Tally U03a000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS1_4 Sprained Ankle - 1 U06a000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS1_5 Sprained Ankle - 2 U06b000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS1_6 Tickets U21x000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS1_7 Class Attendance U04a000S POLYTOMOUS (0 to 2), No response (R ), Not reached / not attempted (N)   PS2_1 Club Membership - 1 U19a000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS2_2 Club Membership - 2 U19b000S POLYTOMOUS (0 to 3), No response (R ), Not reached / not attempted (N)   PS2_3 Book Order U07x000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS2_4 Meeting Room U02x000S POLYTOMOUS (0 to 3), No response (R ), Not reached / not attempted (N)   PS2_5 Reply All U16x000S MISSING (0), CORRECT (1), INCORRECT (7), Not reached / not attempted (N)   PS2_6 Locate Email U11b000S POLYTOMOUS (0 to 3), No response (R ), Not reached / not attempted (N)   PS2_7 Lamp Return U23x000S POLYTOMOUS (0 to 3), No response (R ), Not reached / not attempted (N)    "},{"uri":"https://jonghyun-yun.github.io/procmod/categories/","title":"Categories","tags":[],"description":"","content":""},{"uri":"https://jonghyun-yun.github.io/procmod/tags/","title":"Tags","tags":[],"description":"","content":""}]